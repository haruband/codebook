대표적인 빅데이터 처리 기술인 스파크(Spark)는 중간 결과를 하둡(Hadoop)처럼 디스크에 저장하지 않고 메모리에만 저장함으로써 놀랄만한 성능 개선을 가져왔다. 하지만 그만큼 메모리 사용량이 늘어났고 다양한 상황에서 메모리 부족 현상(OOM)이 발생한다. 이는 쿠버네티스(K8S) 환경에서 다양한 서비스들과 스파크를 동시에 운영할 때 더 다루기 힘든 문제이며, 오늘은 최근 쿠버네티스에서도 지원하기 시작한 스왑(Swap)을 이용하여 이러한 문제를 어떻게 해결했는지 소개하고자 한다.

우선 쿠버네티스 환경에서 스파크를 운영할 때 메모리 부족 현상이 발생하는 상황들에 대해 정리해보도록 하자.
